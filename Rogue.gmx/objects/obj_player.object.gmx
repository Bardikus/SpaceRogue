<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player2</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>obj_transparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>friction = global.playerFrictionFactor;
playerTookDmg = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerTookDmg = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerCanTakeDmg = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.canShootRPG = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.canShootShotgun = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.canShootRifle = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.canShootPistol = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//-------MOVEMENT----------------
//keyboard check for input
if keyboard_check(ord("A")) {
    hspeed -= global.playerGainSpeed * pause;
    //global.playerMoving = global.playerMoveSpeed;
    global.playerIsMoving = true;
}
if keyboard_check(ord("D")) {
    hspeed += global.playerGainSpeed * pause;
    //global.playerMoving = global.playerMoveSpeed;
    global.playerIsMoving = true;
}
if keyboard_check(ord("W")) {
    vspeed -= global.playerGainSpeed * pause;
    //global.playerMoving = global.playerMoveSpeed;
    global.playerIsMoving = true;
}
if keyboard_check(ord("S")) {
    vspeed += global.playerGainSpeed * pause;
    //global.playerMoving = global.playerMoveSpeed;
    global.playerIsMoving = true;
}

if (!keyboard_check(ord("A")) &amp;&amp; !keyboard_check(ord("W")) &amp;&amp; !keyboard_check(ord("S")) &amp;&amp; !keyboard_check(ord("D")))
{  
   global.playerIsMoving = false;
}


//Limit player speed
if (speed &gt; global.playerTopSpeed) {
    speed = global.playerTopSpeed;
}


//-------------------------------

if(pause == 1)
{
//---------WEAPONS------------------------------------------------
//-----Shooting Bullets------------------------
if(currentWeapon == 1 &amp;&amp; mouse_check_button_pressed(mb_left) &amp;&amp; global.canShootPistol)
{
  
    script_execute(scr_playerKnockBack, 0.3);
    script_execute(scr_screenShaker, 0.2, 5); //Intensity, Duration
    global.canShootPistol = false;
    instance_create(obj_player.x + 11, obj_player.y + 10, obj_pistol_Bullet);
    alarm[1] = global.pistol_Bullet_cd;
}
if(currentWeapon == 2 &amp;&amp; mouse_check_button(mb_left) &amp;&amp; global.canShootRifle )
{
    script_execute(scr_playerKnockBack, 0.1);
    script_execute(scr_screenShaker, 0.1, 5); //Intensity, Duration
    global.canShootRifle = false;
    with(instance_create(obj_player.x + 11, obj_player.y + 10, obj_rifle_Bullet)) direction += irandom_range(-3, +3);
    alarm[2] = global.rifle_Bullet_cd;
}
if(currentWeapon == 3 &amp;&amp; mouse_check_button(mb_left) &amp;&amp; global.canShootShotgun)
{
    audio_play_sound(snd_shotgunBlast, 100, false);
    script_execute(scr_playerKnockBack, 0.5);
    script_execute(scr_screenShaker, 0.4, 5); //Intensity, Duration
    global.canShootShotgun = false;
    instance_create(obj_player.x + 11, obj_player.y + 10, obj_shotgun_Bullet);
    with(instance_create(obj_player.x + 11, obj_player.y + 10, obj_shotgun_Bullet)) direction += 3
    with(instance_create(obj_player.x + 11, obj_player.y + 10, obj_shotgun_Bullet)) direction -= 3
    with(instance_create(obj_player.x + 11, obj_player.y + 10, obj_shotgun_Bullet)) direction += 6
    with(instance_create(obj_player.x + 11, obj_player.y + 10, obj_shotgun_Bullet)) direction -= 6

    alarm[3] = global.shotgun_Bullet_cd;
}
if(currentWeapon == 4 &amp;&amp; mouse_check_button(mb_left) &amp;&amp; global.canShootRPG)
{
    script_execute(scr_playerKnockBack, 0.7);
    script_execute(scr_screenShaker, 0.1, 5); //Intensity, Duration
    global.canShootRPG = false;
    instance_create(obj_player.x + 11, obj_player.y + 10, obj_RPG_Bullet);
    alarm[4] = global.RPG_Bullet_cd;
}
//---------------------------------------------

//-----Switching weapons-----------------------
if keyboard_check_pressed(ord("1")) // PISTOL
    currentWeapon = 1;
if keyboard_check_pressed(ord("2")) // RIFLE
    currentWeapon = 2;
if keyboard_check_pressed(ord("3")) // SHOTGUN
    currentWeapon = 3;
if keyboard_check_pressed(ord("4")) // RPG
    currentWeapon = 4;
//--------------------------------------------
}
//-------DEBUG KILL ALL-------------------------------------------------
if( mouse_check_button(mb_right))
{
 with(obj_monster)
 {
    instance_destroy();
 }
}
//---------------------------------------------------------------------------

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_item">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with (other)
{
    if (object_get_name(object_index) == "obj_pickUp_Health")
    {
       
        audio_play_sound(snd_pu_Health, 100, false);
        playerHP += 1;
        if (playerHP &gt; playerMaxHP)
           playerHP = playerMaxHP;
    }
    
    if (object_get_name(object_index) == "obj_pickUp_Oxygen")
    {
        audio_play_sound(snd_pu_Oxygen, 100, false);
        oxygenLevel += oxygenPickUpValue
        if (oxygenLevel &gt; 100)
           oxygenLevel = 100;
    }
    if (object_get_name(object_index) == "obj_pickUp_Modifier")
    {
        audio_play_sound(snd_pu_itemModifier, 100, false);
    }
    instance_destroy();
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_hazard">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (playerCanTakeDmg == true)
{
    audio_play_sound(snd_playerHurt, 100, false);
    global.playerHP -= 1;
    playerCanTakeDmg = false;
    alarm[5] = playerDmgCd;
    playerTookDmg = true;
    alarm[6] = 2;
    
    script_execute(scr_playerEnemyKnock, 0.1)
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_door">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(obj_player.x &lt; 17) // left
{

    if (roomArray[xMapPlayer - 1, yMapPlayer].roomLayout == "")
    {
        roomIndex = irandom(nrOfRooms - 1) + 1
        roomName = string("rm_normal"+string(roomIndex))
        roomArray[xMapPlayer - 1, yMapPlayer].roomLayout = roomName;
    }
    else
        roomName = roomArray[xMapPlayer - 1, yMapPlayer].roomLayout;
        
    room_goto(asset_get_index(roomName));
    xMapPlayer -= 1;
    obj_player.x = 200;
    obj_player.y = 72;    
}
if(obj_player.x &gt; 200) //right
{

    if (roomArray[xMapPlayer + 1, yMapPlayer].roomLayout == "")
    {
        roomIndex = irandom(nrOfRooms - 1) + 1
        roomName = string("rm_normal"+string(roomIndex))
        roomArray[xMapPlayer + 1, yMapPlayer].roomLayout = roomName;
    }
    else
        roomName = roomArray[xMapPlayer + 1, yMapPlayer].roomLayout;
        
    room_goto(asset_get_index(roomName));
    xMapPlayer += 1;
    obj_player.x = 12;
    obj_player.y = 72;
}
if(obj_player.y &lt; 17) //up
{
    if (roomArray[xMapPlayer, yMapPlayer - 1].roomLayout == "")
    {
        roomIndex = irandom(nrOfRooms - 1) + 1
        roomName = string("rm_normal"+string(roomIndex))
        roomArray[xMapPlayer, yMapPlayer - 1].roomLayout = roomName;    
    }
    else
        roomName = roomArray[xMapPlayer, yMapPlayer - 1].roomLayout;
        
    room_goto(asset_get_index(roomName));
    yMapPlayer -= 1;
    obj_player.x = 112;
    obj_player.y = 140;
}
if(obj_player.y &gt; 140) //down
{
    if (roomArray[xMapPlayer, yMapPlayer + 1].roomLayout == "")
    {
        roomIndex = irandom(nrOfRooms - 1) + 1
        roomName = string("rm_normal"+string(roomIndex))
        roomArray[xMapPlayer, yMapPlayer + 1].roomLayout = roomName;    
    }
    else
        roomName = roomArray[xMapPlayer, yMapPlayer + 1].roomLayout;
        
    room_goto(asset_get_index(roomName));
    yMapPlayer += 1;
    obj_player.x = 112;
    obj_player.y = 10;
}

roomArray[xMapPlayer, yMapPlayer].nearUnexplored = false;

script_execute(scr_markNearUnexplored, xMapPlayer, yMapPlayer)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_block">
      <action>
        <libid>1</libid>
        <id>402</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_collision</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>-1</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>hspeed</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>103</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_hspeed</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>402</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_collision</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>-1</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>vspeed</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>104</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_vspeed</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//----PLAYER--------------------------
depth = -2
draw_self();

if(playerTookDmg == true)
    image_index = 0
else
    image_index = 1

depth = -1
draw_sprite_ext( spr_playerShadow, image_index, x + 12, y + 18, image_xscale, image_yscale, image_angle, image_blend, 0.2 );
//-----------------------------------------------------------------------------------------------


//-----LIGHT------------------------------
scr_drawLight(x + 12, //xPos
              y + 8, //yPos
              20,             //Radius
              10,              //Precision
              5);             //Intensity (0 = weak -&gt;255: strong)
//----------------------------------------


//--------WEAPONS-------------------------
depth = - 10
if (pause == 1)
{
    if( mouse_x &gt; obj_player.x)
        weaponOrientation = -1; 
    if( mouse_x &lt;= obj_player.x)
        weaponOrientation = 1; 
    if (currentWeapon == 1) // PISTOL
    {
         draw_sprite_ext(spr_pistol, 0, x + 9, y + 9, 1.5 * weaponOrientation, 1.5 , point_direction(x + 11, y + 11, mouse_x, mouse_y) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 2) // RIFLE
    {
         draw_sprite_ext(spr_rifle, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, mouse_x, mouse_y) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 3) // SHOTGUN
    {
         draw_sprite_ext(spr_shotgun, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, mouse_x, mouse_y) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 4) // RPG
    {
         draw_sprite_ext(spr_RPG, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, mouse_x, mouse_y) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
}
else // PAUSE DRAW
{
    if (currentWeapon == 1) // PISTOL
    {
         draw_sprite_ext(spr_pistol, 0, x + 9, y + 9, 1.5 * weaponOrientation, 1.5 , point_direction(x + 11, y + 11, lastMouseX, lastMouseY) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 2) // RIFLE
    {
         draw_sprite_ext(spr_rifle, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, lastMouseX, lastMouseY) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 3) // SHOTGUN
    {
         draw_sprite_ext(spr_shotgun, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, lastMouseX, lastMouseY) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
    if (currentWeapon == 4) // RPG
    {
         draw_sprite_ext(spr_RPG, 0, x + 12, y + 10, 1 * weaponOrientation, 1 , point_direction(x + 11, y + 11, lastMouseX, lastMouseY) + 180 * (weaponOrientation + 1) /2, c_white, 1);
    }
}
depth = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>4,4</point>
    <point>4,4</point>
  </PhysicsShapePoints>
</object>
